<div class="section-title primary-text">{{languageService.getText("customerDetailsText")}}</div>
<div class="mat-elevation-z5 rounded-div" fxLayout="row wrap" fxLayoutGap="10px">
    <div fxFlex="0 1 calc(33.3% - 10px)" fxLayout="row" class="text-block div-right-border">
        <div fxFlex="30" fxLayoutAlign="start center" class="accent-text">{{languageService.getText("corporateCustomerfirstNameText")}}</div>
        <div fxFlex="10" fxLayoutAlign="center center" class="accent-text">:</div>
        <div fxFlex="60" fxLayoutAlign="start center" *ngIf="!!(singleCustomer$ | async)"><b>{{(singleCustomer$ | async).customer_details.first_name}}</b></div>
    </div>
    <div fxFlex="0 1 calc(33.3% - 10px)" fxLayout="row" class="text-block div-right-border">
        <div fxFlex="30" fxLayoutAlign="start center" class="accent-text">{{languageService.getText("corporateCustomerlastNameText")}}</div>
        <div fxFlex="10" fxLayoutAlign="center center" class="accent-text">:</div>
        <div fxFlex="60" fxLayoutAlign="start center" *ngIf="!!(singleCustomer$ | async)"><b>{{(singleCustomer$ | async).customer_details.last_name}}</b></div>
    </div>
    <div fxFlex="0 1 calc(33.3% - 10px)" fxLayout="row" class="text-block">
        <div fxFlex="30" fxLayoutAlign="start center" class="accent-text">{{languageService.getText("contactPhoneText")}}</div>
        <div fxFlex="10" fxLayoutAlign="center center" class="accent-text">:</div>
        <div fxFlex="60" fxLayoutAlign="start center" *ngIf="!!(singleCustomer$ | async)"><b>{{(singleCustomer$ | async).customer_details.phone_no}}</b></div>
    </div>
    <div fxFlex="0 1 calc(33.3% - 10px)" fxLayout="row" class="text-block div-right-border">
        <div fxFlex="30" fxLayoutAlign="start center" class="accent-text">{{languageService.getText("emailIDText")}}</div>
        <div fxFlex="10" fxLayoutAlign="center center" class="accent-text">:</div>
        <div fxFlex="60" fxLayoutAlign="start center" *ngIf="!!(singleCustomer$ | async)"><b>{{(singleCustomer$ | async).customer_details.email_id}}</b></div>
    </div>
    <div fxFlex="0 1 calc(33.3% - 10px)" fxLayout="row" class="text-block div-right-border">
        <div fxFlex="30" fxLayoutAlign="start center" class="accent-text">{{languageService.getText("emailVerficationText")}}</div>
        <div fxFlex="10" fxLayoutAlign="center center" class="accent-text">:</div>
        <div fxFlex="60" fxLayoutAlign="start center" *ngIf="!!(singleCustomer$ | async)"><b>{{(singleCustomer$ | async).customer_details.email_verify_status_name}}</b></div>
    </div>
    <div fxFlex="0 1 calc(33.3% - 10px)" fxLayout="row" class="text-block">
        <div fxFlex="30" fxLayoutAlign="start center" class="accent-text">{{languageService.getText("corporateProfileText")}}</div>
        <div fxFlex="10" fxLayoutAlign="center center" class="accent-text">:</div>
        <div fxFlex="60" fxLayoutAlign="start center" *ngIf="!!(singleCustomer$ | async)"><b>{{(singleCustomer$ | async).customer_details.corporate_enabled_name}}</b></div>
    </div>
    <div fxFlex="0 1 calc(33.3% - 10px)" fxLayout="row" class="text-block div-right-border">
        <div fxFlex="30" fxLayoutAlign="start center" class="accent-text">{{languageService.getText("dpinStatusText")}}</div>
        <div fxFlex="10" fxLayoutAlign="center center" class="accent-text">:</div>
        <div fxFlex="60" fxLayoutAlign="start center" *ngIf="!!(singleCustomer$ | async)"><b>{{(singleCustomer$ | async).customer_details.dpin_status_name}}</b></div>
    </div>
    <div fxFlex="0 1 calc(33.3% - 10px)" fxLayout="row" class="text-block div-right-border">
        <div fxFlex="30" fxLayoutAlign="start center" class="accent-text">{{languageService.getText("kycStatusText")}}</div>
        <div fxFlex="10" fxLayoutAlign="center center" class="accent-text">:</div>
        <div fxFlex="60" fxLayoutAlign="start center" *ngIf="!!(singleCustomer$ | async)"><b>{{(singleCustomer$ | async).customer_details.kyc_status_name}}</b></div>
    </div>
    <div fxFlex="0 1 calc(33.3% - 10px)" fxLayout="row" class="text-block">
        <div fxFlex="30" fxLayoutAlign="start center" class="accent-text">{{languageService.getText("statusNameText")}}</div>
        <div fxFlex="10" fxLayoutAlign="center center" class="accent-text">:</div>
        <div fxFlex="60" fxLayoutAlign="start center" *ngIf="!!(singleCustomer$ | async)"><b>{{(singleCustomer$ | async).customer_details.status_name}}</b></div>
    </div>
    <div fxFlex="0 1 calc(33.3% - 10px)" fxLayout="row" class="text-block div-right-border">
        <div fxFlex="30" fxLayoutAlign="start center" class="accent-text">{{languageService.getText("customerCurrentStateText")}}</div>
        <div fxFlex="10" fxLayoutAlign="center center" class="accent-text">:</div>
        <div fxFlex="60" fxLayoutAlign="start center" *ngIf="!!(singleCustomer$ | async)"><b>{{(singleCustomer$ | async).customer_details.action_code_name}}</b></div>
    </div>
</div>


<div class="section-title primary-text" *ngIf="!!(singleCustomer$ | async) && (singleCustomer$ | async).txn_details.length > 0">{{languageService.getText("txnDetailsText")}}</div>
<div class="section-title" *ngIf="!!(singleCustomer$ | async) && (singleCustomer$ | async).txn_details.length > 0">
    <span class="accent-text"><b>{{languageService.getText("walletBalanceText")}}</b></span>
    <span *ngIf="!!(singleCustomer$ | async)"><b>{{(singleCustomer$ | async).customer_details.wallet_balance | currency:'INR':'symbol'}}</b></span>
</div>
<table mat-table matSort [dataSource]="txnDataSource" class="mat-elevation-z5 rounded-table" #txnSort="matSort" *ngIf="!!(singleCustomer$ | async) && (singleCustomer$ | async).txn_details.length > 0">
    <ng-container matColumnDef="txn_refid">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("txnRefText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.txn_refid}}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="bank_txn_id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("bankTxnText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.bank_txn_id}}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="gateway_txn_id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("gatewayTxnRef")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.gateway_txn_id}}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="txn_status">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("txnStatusText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.txn_status_name}}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="update_timestamp">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("txnTimeText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.update_timestamp | date:"dd/MM/yyyy HH:mm:ss"}}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="txn_amount">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("txnAmountText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.txn_amount | currency:'INR':'symbol' }}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="transaction_type">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("txnTypeText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.transaction_type_name}}</span>
        </td>
    </ng-container>
    
    <tr mat-header-row *matHeaderRowDef="txnDisplayedColumns; sticky: true"></tr>
    <tr mat-row *matRowDef="let row; columns: txnDisplayedColumns;"></tr>
</table>
<mat-paginator [pageSize]="5" #txnPaginator [pageSizeOptions]="[5, 10, 20, 50]" class="mat-elevation-z5" [showFirstLastButtons]=true>
</mat-paginator>

<!-- <div fxLayout="row" fxLayoutAlign="start center" class="button-filter-container">
    <div fxFlex="20">
        <div class="section-title primary-text">{{languageService.getText("tripDetailsText")}}</div>
    </div>
    <div fxFlex="80" fxLayoutGap="5px" class="search-bar-container">
        <mat-form-field appearance="outline" novalidate>
            <input matInput class="search-input" (keyup)="applyFilter($event.target.value)" placeholder='{{languageService.getText("searchTripDetailsText")}}' autocomplete="off">
            <mat-icon matPrefix color="primary">search</mat-icon>
        </mat-form-field>
    </div>
</div> -->
<div fxLayout="row" fxLayoutAlign="end center" class="button-filter-container">
    <div fxFlex="20" fxLayoutAlign="start center" class="section-title primary-text">{{languageService.getText("customertripsHeaderText")}}</div>
    <div fxFlex="80" fxLayoutAlign="center center" fxLayoutGap="5px" class="search-bar-container">
        <form [formGroup]="dateFilter" [style.width.%]="100">
            <mat-form-field appearance="outline" novalidate class="right-padding">
                <input matInput class="search-input" (keyup)="applyFilter($event.target.value)" placeholder='Search'
                    autocomplete="off">
                <mat-icon matPrefix color="primary">search</mat-icon>
            </mat-form-field>
            <mat-form-field fxFlex="calc(20% - 5px)" appearance="outline" novalidate class="right-padding">
                <input matInput [owlDateTimeTrigger]="filterstarttime" [owlDateTime]="filterstarttime"
                    placeholder='Filter From date' formControlName="filterStartTime" autocomplete="off"
                    (ngModelChange)="filterDate()" (dateChange)="filterDate()">
                <owl-date-time #filterstarttime></owl-date-time>
            </mat-form-field>
            <mat-form-field fxFlex="calc(20% - 5px)" appearance="outline" novalidate>
                <input matInput [owlDateTimeTrigger]="filterendtime" [owlDateTime]="filterendtime"
                    placeholder='Filter To Date' formControlName="filterEndTime" autocomplete="off"
                    (ngModelChange)="filterDate()">
                <owl-date-time #filterendtime></owl-date-time>
            </mat-form-field>
        </form>
    </div>
</div>
<table mat-table matSort [dataSource]="tripDataSource" class="mat-elevation-z5 rounded-table" #tripSort="matSort">
    <ng-container matColumnDef="trip_ref_no">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("tripRefNoText")}}</th>
        <td mat-cell *matCellDef="let element">
            <a [routerLink]="['/trip-management/trip-details/' + element.customer_trip_association_id]">{{element.trip_ref_no}}</a>

        </td>
    </ng-container> 
    <ng-container matColumnDef="booking_time">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("bookingTimeText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.booking_time | date:"dd/MM/yyyy HH:mm:ss"}}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="vehicle_id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("vehicleText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.vehicle_idnumber}}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="start_location">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("startRentallPointText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.start_location_name}}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="corporate_enabled">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("corporateTripText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{!!element.corporate_enabled ? "Yes" : "No"}}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="coupon_code">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("couponText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.coupon_code}}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="end_location">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("endRentalPointText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.end_location_name}}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="end_time">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("endTimeText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.end_time | date:"dd/MM/yyyy HH:mm:ss"}}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="distance_travelled">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("distanceText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.distance_travelled}}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="riding_time">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("ridingTimeText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.riding_time | dayHourMinute}}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="pause_time">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("pauseTimeText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.pause_time | dayHourMinute}}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="total_trip_time">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("tripTimeText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.total_trip_time | dayHourMinute}}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="trip_status">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("tripStatusText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.trip_status_name}}</span>
        </td>
    </ng-container>
    
    <tr mat-header-row *matHeaderRowDef="tripDisplayedColumns; sticky: true"></tr>
    <tr mat-row *matRowDef="let row; columns: tripDisplayedColumns;"></tr>
</table>
<mat-paginator [pageSize]="5" #tripPaginator [pageSizeOptions]="[5, 10, 20, 50]" class="mat-elevation-z5" [showFirstLastButtons]=true>
</mat-paginator>

<div class="section-title primary-text">{{languageService.getText("emergencyContactText")}}</div>
<table mat-table [dataSource]="contactDataSource" class="mat-elevation-z5 rounded-table">
    <ng-container matColumnDef="contact_name">
        <th mat-header-cell *matHeaderCellDef>{{languageService.getText("contactNameText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.contact_name}}</span>
        </td>
    </ng-container>
    <ng-container matColumnDef="contact_phone">
        <th mat-header-cell *matHeaderCellDef>{{languageService.getText("phoneNoText")}}</th>
        <td mat-cell *matCellDef="let element">
            <span>{{element.contact_phone}}</span>
        </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="contactDisplayedColumns; sticky: true"></tr>
    <tr mat-row *matRowDef="let row; columns: contactDisplayedColumns;"></tr>
</table>