<div fxLayout="row" fxLayoutAlign="start center" class="button-filter-container">
    <div fxFlex="15">
        <button mat-raised-button color="primary"
            (click)="openBottomSheet()">{{languageService.getText("rpAddButtonText")}}</button>
    </div>
    <div fxFlex="75" class="search-bar-container">
        <form [formGroup]="Filter">
        <mat-form-field [style.width.%]="50" appearance="outline" novalidate>
            <input matInput class="search-input" (keyup)="applyFilter($event.target.value)"
                placeholder='{{languageService.getText("rpPlaceholderText")}}'>
            <mat-icon matPrefix color="primary">search</mat-icon>
        </mat-form-field>
        <mat-form-field [style.width.%]="25" appearance="outline" novalidate>
            <mat-select placeholder='{{languageService.getText("ownershipType")}}' (selectionChange)="filter()" formControlName="wonership">
                <mat-option value=0>{{languageService.getText("allOwnershipType")}}</mat-option>
                <mat-option *ngFor="let type of (rentalpoint_ownership$ | async)" [value]="type.domain_code">
                    {{type.domain_value}}</mat-option>
            </mat-select>
        </mat-form-field>
        <mat-form-field [style.width.%]="25" appearance="outline" novalidate>
            <mat-select placeholder='{{languageService.getText("fanplaceholder")}}' [disabled]="frnchiseDisable"
            formControlName="franchise"
             (selectionChange)="filter()">
                <mat-option value=0>{{languageService.getText("allFranchise")}}</mat-option>
                <mat-option *ngFor="let fun of (franchise$ | async)" [value]="fun.admn_partner_id">
                    {{fun.franchise_name}}</mat-option>
            </mat-select>
        </mat-form-field>
        </form>
    </div>
    <div fxFlex="4" fxLayoutGap="5px">
        <span class="accent-text">
            <mat-slide-toggle (change)="changed($event.checked)" [color]="color"></mat-slide-toggle>
        </span>
    </div>
    <div fxFlex="4">{{languageService.getText("rpMapViewText")}}</div>
</div>
<div>
    <table mat-table matSort [dataSource]="datasource" class="mat-elevation-z5 rounded-table">

        <ng-container matColumnDef="rentalpoint_name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("rpText")}}
            </th>
            <td mat-cell *matCellDef="let rpList">
                <span>{{rpList.rentalpoint_name}}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="region_name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("rptableHeaderRegion")}}
            </th>
            <td mat-cell *matCellDef="let rpList">
                <span>{{rpList.region_name}}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="city_name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("rptableHeaderCity")}}
            </th>
            <td mat-cell *matCellDef="let rpList">
                <span>{{rpList.city_name}}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="rentalpoint_ownership_name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("ownershipTypeName")}}
            </th>
            <td mat-cell *matCellDef="let rpList">
                <span>{{rpList.rentalpoint_ownership_name}}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="address">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("rptableHeaderAddress")}}
            </th>
            <td mat-cell *matCellDef="let rpList">
                <span>{{rpList.addressline1}}, {{rpList.addressline2}}, {{rpList.pin}}</span>
            </td>
        </ng-container>
        <!-- <ng-container matColumnDef="address">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("rptableHeaderAddress")}}
            </th>
            <td mat-cell *matCellDef="let rpList">
                <span>{{rpList.addressline1}}, {{rpList.addressline2}}, {{rpList.pin}}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="states_name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("rptableHeaderState")}}</th>
            <td mat-cell *matCellDef="let rpList">
                <span>{{rpList.states_name}}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="countries_name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                {{languageService.getText("rptableHeaderCountryCode")}}</th>
            <td mat-cell *matCellDef="let rpList">
                <span>{{rpList.countries_name}}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="city_name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                {{languageService.getText("CityText")}}</th>
            <td mat-cell *matCellDef="let rpList">
                <span>{{rpList.city_name}}</span>
            </td>
        </ng-container> -->
        <ng-container matColumnDef="opening_hours">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                {{languageService.getText("rptableHeaderOpeningTime")}}</th>
            <td mat-cell *matCellDef="let rpList">
                <span>{{rpList.opening_hours}}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="closing_hours">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                {{languageService.getText("rptableHeaderTClosingTime")}}</th>
            <td mat-cell *matCellDef="let rpList">
                <span>{{rpList.closing_hours}}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="rentalpoint_type_name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>{{languageService.getText("rptaleHeaderType")}}
            </th>
            <td mat-cell *matCellDef="let rpList">
                <span>{{rpList.rentalpoint_type_name}}</span>
            </td>
        </ng-container>
        <!-- <ng-container matColumnDef="max_capacity">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                {{languageService.getText("rptableHeaderMaximumCapacity")}}
            </th>
            <td mat-cell *matCellDef="let rpList">
                <span>{{rpList.max_capacity}}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="available_capacity">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                {{languageService.getText("rptableHeaderAvailableCapacity")}}
            </th>
            <td mat-cell *matCellDef="let rpList">
                <span>{{rpList.available_capacity}}</span>
            </td>
        </ng-container> -->
        <ng-container matColumnDef="rentalpoint_status_name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                {{languageService.getText("rptableHeaderrentalTableStatusName")}}
            </th>
            <td mat-cell *matCellDef="let rpList">
                <span>{{rpList.rentalpoint_status_name}}</span>
            </td>
        </ng-container>
        <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                {{languageService.getText("ActionText")}}
            </th>
            <td mat-cell *matCellDef="let rpList">
                <button matTooltip="Edit" mat-icon-button color="accent"
                    (click)="editRentalPoint(rpList.rentalpoint_id)"><mat-icon> edit </mat-icon></button>
                <button matTooltip="Delete" mat-icon-button color="warn"
                    (click)="deleteRentalPoint(rpList.rentalpoint_id)"><mat-icon> delete </mat-icon></button>
                <button matTooltip="Details" mat-icon-button color="primary"
                    (click)="rentalPointHistory(rpList.rentalpoint_id)"> <mat-icon> info </mat-icon> </button>
                <button *ngIf="rpList.rentalpoint_type == 2" matTooltip="Move" mat-icon-button color="warn"
                    (click)="moveRentalPoint(rpList.rentalpoint_id)"> <mat-icon>keyboard_tab </mat-icon> </button>
            </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <mat-paginator [pageSize]="10" [pageSizeOptions]="[5, 10, 20, 50]" class="mat-elevation-z5"
        [showFirstLastButtons]=true>
    </mat-paginator>
</div>